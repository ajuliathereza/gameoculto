/*
  Exemplo Halo ‚Äî Estilos espec√≠ficos
  Objetivo: tornar a leitura longa organizada e imagens bonitas, sem afetar outras p√°ginas.
  Escopo: seletores iniciando em .single-lore e .single-content para isolar o impacto.
*/

/* Layout e tipografia base do artigo */
.single-lore {
  --cp-primary: #c084fc;   /* roxo neon */
  --cp-secondary: #e879f9; /* rosa neon */
  --cp-glow: rgba(232, 121, 249, .55);
  --cp-glow-strong: rgba(192, 132, 252, .45);
  max-width: 980px;
  margin-inline: auto;
}
.single-header { margin-bottom: 1.2rem; }
.single-title {
  letter-spacing: .2px;
  line-height: 1.15;
  background: linear-gradient(90deg, var(--cp-primary), var(--cp-secondary));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  filter: drop-shadow(0 0 8px var(--cp-glow-strong)) drop-shadow(0 0 14px rgba(232,121,249,.25));
}
.single-meta { opacity: .85; font-size: .95rem; gap: .5rem; display: flex; flex-wrap: wrap; }
.single-meta .date::before { content: "üóìÔ∏è "; }
.single-meta .tags::before { content: "üè∑Ô∏è "; }

/* Capa */
.single-cover { margin: .8rem 0 1.2rem; }
.single-cover img {
  width: 100%;
  height: auto;
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
}
.single-cover figcaption { opacity: .9; padding: .5rem .2rem; font-size: .95rem; }

/* Conte√∫do longo: ritmo vertical e leitura confort√°vel */
.single-content {
  --halo-gap: 1rem;
}
.single-content > * + * { margin-top: var(--halo-gap); }
.single-content h2 {
  margin-top: 1.6rem;
  margin-bottom: .8rem; /* mais respiro abaixo do t√≠tulo */
  font-size: 1.45rem;
  line-height: 1.25;
  color: var(--cp-primary);
  text-shadow: 0 0 6px var(--cp-glow), 0 0 14px rgba(192,132,252,.28);
  position: relative;
  padding-bottom: .35rem; /* evita colapso de margens e protege o ::after */
}
.single-content h2::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 68px;
  height: 2px;
  background: linear-gradient(90deg, var(--cp-primary), transparent);
  opacity: .9;
}

/* Garante espa√ßo quando figuras v√™m logo ap√≥s o h2 */
.single-content h2 + .figure-wide,
.single-content h2 + figure,
.single-content h2 + .halo-grid {
  margin-top: .9rem;
}
.single-content { counter-reset: section -1; }
.single-content h2::before {
  counter-increment: section;
  content: counter(section) ". ";
  opacity: .7;
  margin-right: .2rem;
}
.single-content h3 { margin-top: 1rem; font-size: 1.15rem; color: var(--cp-secondary); text-shadow: 0 0 6px var(--cp-glow); }
.single-content p { line-height: 1.75; font-size: 1.05rem; }
.single-content ul { padding-left: 1.2rem; }
.single-content ol { padding-left: 1.25rem; }

/* Centraliza√ß√£o de t√≠tulos e sublinhado em telas m√©dias/grandes */
@media (min-width: 820px) {
  .single-content h2, .single-content h3 { text-align: center; }
  .single-content h2::after { left: 50%; transform: translateX(-50%); }
}

/* Limitar a largura de blocos de texto diretos para coer√™ncia visual */
.single-content > p,
.single-content > blockquote,
.single-content > dl,
.single-content > table,
.single-content > .halo-card {
  max-width: 72ch;
  margin-inline: auto;
}

/* Centralizar legendas de figuras para coer√™ncia */
.single-content figure figcaption { text-align: center; }

/* Blockquote (cita√ß√µes) */
.single-content blockquote {
  border-left: 4px solid var(--accent);
  padding: 1rem 1.2rem;
  border-radius: 6px;
  background: var(--bg-darker);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
}
.single-content blockquote p { margin: 0; }

/* Extra/Cr√¥nicas estilizado (eleva√ß√£o + it√°lico) */
.lore-extra {
  border: 1px solid var(--muted);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.12));
  border-radius: 12px;
  box-shadow: 0 14px 34px rgba(0,0,0,.35);
  padding: 1.1rem 1.2rem;
  max-width: 72ch;
  margin: 1.2rem auto;
  position: relative;
  overflow: hidden;
  font-style: italic;
}
.lore-extra::before {
  content: "‚ú¶ Extra";
  position: absolute;
  top: .6rem;
  right: .8rem;
  font-size: .85rem;
  letter-spacing: .04em;
  color: var(--accent);
  opacity: .85;
}
.lore-extra h3 {
  margin: 0 0 .6rem;
  font-size: 1.15rem;
  text-align: center;
  color: var(--cp-secondary);
  text-shadow: 0 0 6px var(--cp-glow);
  font-style: normal; /* t√≠tulo n√£o em it√°lico */
}
.lore-extra p { margin: 0 0 .8rem; }
.lore-extra p:last-child { margin-bottom: 0; }
.lore-extra .lead-quote {
  margin: .2rem 0 1rem;
  padding: .6rem .9rem;
  border-left: 3px solid var(--accent);
  background: rgba(0,0,0,.15);
  border-radius: 8px;
}

/* Listas do bloco extra com marcador personalizado */
.lore-extra ul { padding-left: 1.1rem; margin: .2rem 0; }
.lore-extra li { margin: .35rem 0; }
.lore-extra li::marker { content: "‚ñ∏ "; color: var(--accent); }

/* Linha do tempo com defini√ß√£o (dl) elegante */
.single-content dl {
  position: relative;
  padding-left: 1rem;
  display: grid;
  grid-template-columns: max-content 1fr;
  gap: .6rem 1rem;
  align-items: start;
}
.single-content dl::before {
  content: "";
  position: absolute;
  left: .15rem;
  top: .2rem;
  bottom: .2rem;
  width: 2px;
  background: linear-gradient(180deg, var(--muted), transparent 85%);
}
.single-content dt {
  font-weight: 700;
  opacity: .85;
}
.single-content dd {
  margin: 0 0 .6rem .6rem;
  padding-bottom: .4rem;
  border-bottom: 1px dashed rgba(255,255,255,.08);
}

/* Figuras e galeria */
.single-content figure {
  background: var(--bg-darker);
  border: 1px solid var(--muted);
  border-radius: 10px;
  overflow: hidden;
}

/* Figuras no fluxo principal alinhadas √† largura do texto */
.single-content > figure { max-width: 72ch; margin-inline: auto; }
.single-content > .figure-wide { max-width: 72ch; }

/* Figuras de cap√≠tulo imediatamente ap√≥s o conte√∫do tamb√©m respeitam 72ch */
.single-content h2 + .halo-card + .figure-wide,
.single-content h2 + .halo-card + figure,
.single-content h2 + .figure-wide,
.single-content h2 + figure { max-width: 72ch; margin-inline: auto; }
.single-content figure img {
  display: block;
  width: 100%;
  height: auto;
  max-height: clamp(180px, 42vh, 420px);
  object-fit: cover;
  transition: transform .25s ease, box-shadow .25s ease;
}
.single-content figure figcaption {
  padding: .55rem .75rem;
  font-size: .95rem;
  opacity: .9;
}
.single-content figure:hover img { transform: scale(1.01); box-shadow: 0 10px 24px rgba(0,0,0,.35); }

/* Propor√ß√µes opcionais para imagens */
.single-content img.ratio-16x9 { aspect-ratio: 16 / 9; object-fit: cover; }
.single-content img.ratio-4x3  { aspect-ratio: 4 / 3;  object-fit: cover; }
.single-content img.ratio-1x1  { aspect-ratio: 1 / 1;  object-fit: cover; }

/* Spoilers (details/summary) */
.single-content details {
  border: 1px solid var(--muted);
  border-radius: 8px;
  background: var(--bg-darker);
}
.single-content details + details { margin-top: .6rem; }
.single-content summary {
  cursor: pointer;
  padding: .7rem .9rem;
  list-style: none;
  user-select: none;
}
.single-content summary::-webkit-details-marker { display: none }
.single-content details[open] summary { border-bottom: 1px dashed rgba(255,255,255,.08); }
.single-content details > *:not(summary) { padding: .7rem .9rem; }

/* Cart√µes utilit√°rios (se√ß√µes em destaque). 
   Dica: quando poss√≠vel use <div class="halo-card">...</div> no conte√∫do. */
.halo-card {
  border: 1px solid var(--muted);
  padding: 1rem;
  border-radius: 10px;
  background: var(--bg-darker);
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
.halo-card p { margin: 0 0 .9rem; }
.halo-card p:last-child { margin-bottom: 0; }
.halo-card h3 { margin: .1rem 0 .6rem; padding-bottom: .35rem; border-bottom: 1px solid rgba(255,255,255,.08); }
.halo-grid { display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }

/* Cap√≠tulos longos: primeiro card ap√≥s cada h2 com tipografia mais confort√°vel */
.single-content h2 + .halo-card {
  font-size: 1.08rem;
  line-height: 1.85;
  max-width: 72ch;
  margin-inline: auto;
  padding: 1.1rem 1.2rem;
}

/* Drop cap para o primeiro par√°grafo dos cap√≠tulos */
.single-content h2 + .halo-card p:first-of-type::first-letter {
  float: left;
  font-size: 2.4em;
  line-height: .9;
  padding-right: .08em;
  color: var(--cp-primary);
  text-shadow: 0 0 8px var(--cp-glow);
}

@media (max-width: 680px) {
  .single-content h2 + .halo-card p:first-of-type::first-letter {
    float: none;
    font-size: 1em;
    padding-right: 0;
    text-shadow: none;
  }
}

/* Separadores suaves */
.halo-sep { border: 0; border-top: 1px solid rgba(255,255,255,.08); margin: 1.2rem 0; }

/* Split layout utilit√°rio para se√ß√µes com coluna lateral */
.split-2 { display: grid; gap: 1rem; grid-template-columns: 2fr 1fr; align-items: start; }
@media (max-width: 980px) { .split-2 { grid-template-columns: 1fr; } }
.split-2 .side-note { float: none; width: auto; margin: 0; }

/* Rodap√© e navega√ß√£o local */
.back-idx .btn-lore { margin-top: 1rem; }
.single-footer { margin-top: 1.6rem; }
.single-footer ul { padding-left: 1.1rem; }

/* Chips de tags (se decidir exibir no fim) */
.tags-chips { display: flex; flex-wrap: wrap; gap: .5rem; margin-top: .6rem; }
.tags-chips .chip {
  border: 1px solid var(--muted);
  background: var(--bg-darker);
  padding: .25rem .55rem;
  border-radius: 999px;
  font-size: .9rem;
  opacity: .95;
}

/* Sum√°rio (TOC) para cap√≠tulos longos */
.toc {
  border: 1px solid var(--muted);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.08));
  border-radius: 12px;
  padding: 1rem 1.1rem;
  box-shadow: 0 10px 28px rgba(0,0,0,.25);
  margin: .6rem 0 1.2rem;
}
.toc h3 { margin: 0 0 .65rem; font-size: 1.05rem; opacity: .95; display: flex; align-items: center; gap: .4rem; }
.toc h3::before { content: "üìú"; opacity: .9; }
.toc ul { list-style: none; display: grid; gap: .5rem .8rem; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); padding-left: 0; margin: 0; }
.toc li { position: relative; padding-left: 1rem; }
.toc li::before { content: "‚Ä∫"; position: absolute; left: 0; top: 0; color: var(--accent); opacity: .9; }
.toc a { color: var(--fg); opacity: .95; text-decoration: none; display: block; padding: .35rem .45rem; border-radius: 6px; transition: background-color .2s ease, color .2s ease; }
.toc a:hover { color: var(--accent); background: rgba(255,255,255,.04); }

/* Figuras cinematogr√°ficas e flutuantes */
.figure-wide {
  margin: 0; /* figure-wide assume o controle total */
}
.figure-wide img {
  width: 100%;
  height: auto;
  aspect-ratio: 21 / 9;
  max-height: clamp(180px, 36vh, 380px);
  object-fit: cover;
  border-radius: 12px;
  box-shadow: 0 12px 28px rgba(0,0,0,.4);
}
.figure-wide figcaption { padding: .6rem .75rem; font-size: .98rem; opacity: .92; }

/* Variante alta para cap√≠tulos com personagens (por-figura) */
.figure-tall img {
  aspect-ratio: 4 / 3;
  max-height: clamp(240px, 48vh, 520px);
  object-fit: cover;
  object-position: center; /* pode ajustar para 'center 20%' se os rostos estiverem mais altos */
}

/* Variante ainda mais alta para o cap√≠tulo 2 especificamente */
.figure-taller-02 img {
  aspect-ratio: 3 / 4; /* bem mais vertical */
  max-height: clamp(360px, 62vh, 760px);
  object-fit: cover;
  object-position: center top; /* prioriza rostos mais altos no quadro */
}

.figure-float-right, .figure-float-left {
  max-width: 420px;
}
.figure-float-right { float: right; margin: .2rem 0 1rem 1rem; }
.figure-float-left  { float: left;  margin: .2rem 1rem 1rem 0; }
.figure-float-right img, .figure-float-left img { border-radius: 10px; box-shadow: 0 8px 20px rgba(0,0,0,.35); }

@media (max-width: 860px) {
  .figure-float-right, .figure-float-left { float: none; max-width: 100%; margin: .6rem 0; }
}

/* Galerias r√°pidas */
.gallery-2 { display: grid; gap: .9rem; grid-template-columns: repeat(2, 1fr); }
.gallery-3 { display: grid; gap: .9rem; grid-template-columns: repeat(3, 1fr); }
@media (max-width: 760px) {
  .gallery-2, .gallery-3 { grid-template-columns: 1fr; }
}
.gallery-2 figure img, .gallery-3 figure img {
  aspect-ratio: 16 / 9;
  max-height: clamp(160px, 28vh, 320px);
  object-fit: cover;
}

/* Cr√©ditos discretos dentro da legenda */
.caption-credit { display: block; opacity: .75; font-size: .9rem; margin-top: .2rem; }

/* Breadcrumb minimalista */
.breadcrumb { font-size: .95rem; opacity: .9; margin: .4rem 0 .2rem; }
.breadcrumb a { color: var(--fg); text-decoration: none; opacity: .9; }
.breadcrumb a:hover { color: var(--accent); text-decoration: underline; }
.breadcrumb .sep { opacity: .6; margin: 0 .35rem; }

/* TOC ativo ao rolar */
.toc a.active { color: var(--accent); text-decoration: underline; }

/* Comportamento sticky em telas grandes */
@media (min-width: 980px) {
  .toc { position: sticky; top: .75rem; z-index: 1; }
}

/* Callouts tem√°ticos */
.callout { border: 1px solid var(--muted); border-radius: 10px; background: var(--bg-darker); padding: .9rem 1rem; }
.callout h4 { margin: 0 0 .4rem; font-size: 1.05rem; }
.callout p { margin: 0; }
.callout-info { border-color: rgba(100, 180, 255, .35); box-shadow: inset 0 0 0 1px rgba(100, 180, 255, .08); }
.callout-tip { border-color: rgba(100, 255, 180, .35); box-shadow: inset 0 0 0 1px rgba(100, 255, 180, .08); }
.callout-warning { border-color: rgba(255, 200, 120, .35); box-shadow: inset 0 0 0 1px rgba(255, 200, 120, .08); }
.callout-spoiler { border-color: rgba(255, 120, 160, .35); box-shadow: inset 0 0 0 1px rgba(255, 120, 160, .08); }

/* Side note (nota lateral em telas grandes) */
.side-note { border-left: 3px solid var(--accent); padding: .6rem .9rem; background: var(--bg-darker); border-radius: 6px; opacity: .95; }
@media (min-width: 980px) {
  .side-note { float: right; width: 38%; margin: .2rem 0 1rem 1rem; }
}
@media (max-width: 979px) {
  .side-note { margin: .6rem 0; }
}

/* Tabela estilizada para resumos */
.single-content table { width: 100%; border-collapse: collapse; }
.single-content th, .single-content td { text-align: left; padding: .6rem .7rem; border-bottom: 1px solid rgba(255,255,255,.08); }
.single-content thead th { background: var(--bg-darker); border-bottom: 1px solid var(--muted); }
.single-content tbody tr:hover { background: rgba(255,255,255,.03); }

/* Responsividade */
@media (max-width: 680px) {
  .single-meta { font-size: .9rem; }
  .single-content h2 { font-size: 1.3rem; }
  .single-cover img { border-radius: 8px; }
}
